<div class="banner">
 <%= image_tag("headerladp.jpeg", alt: "Texte alternatif de l'image") %>
</div>

<div>
    <% if user_signed_in? && current_user.pseudo ==  nil%>
        <%= form_for(current_user, url: new_pseudo_path, method: :patch) do |f| %>
        <h2>Bienvenue parmi nous choisissez votre pseudo pour accéder au site</h2>
        <div class="field">
            <%= f.label :pseudo %>
            <%= f.text_field :pseudo %>
        </div>

        <div class="actions">
            <%= f.submit "Mettre à jour le pseudo" %>
        </div>
        <% end %>
    <% end %>
    <% if user_signed_in? && current_user.pseudo !=  nil%>
        <h2>Bienvenue à toi <%= current_user.pseudo %> </h2>
    <% end %>
    <section class="d-flex flex-column justify-content-center align-items-center py-5">
    <h2 class="title-section mb-5 text-uppercase">LES NOUVEAUTÉS</h2>
        <swiper-container class="mySwiper col-11 col-md-8 col-xl-5" pagination="false" effect="coverflow" grab-cursor="true" centered-slides="true"
        slides-per-view="3" coverflow-effect-rotate="0" coverflow-effect-stretch="0" coverflow-effect-depth="100"
        coverflow-effect-modifier="2" coverflow-effect-slide-shadows="false" loop="true">
            <% @events_carrousel.each do |event| %>
            <swiper-slide class="rounded-3">
                <div class="container p-0">
                    <img src="<%= event.image_url %>" alt="event image" class="rounded-top-3" />
                    <div class="d-flex flex-column align-items-center">
                        <h3 class="text-center title-event text-uppercase pt-3"> <%= event.title%> </h3>
                        <a href="<%= event_path(event) %>"><button class="buttonMore fs-3 p-0"><pre class="m-0"> + </pre></button></a>
                        </a>
                    </div>
                </div>
            </swiper-slide>
            <% end %>
        </swiper-container>
    </section>
    <section class="d-flex flex-column justify-content-center align-items-center py-5">
    <h2 class="title-section mb-5 text-uppercase">NOS ÉVÉNEMENTS</h2>
        <% if user_signed_in? %>
        <div style="text-align: center;">
            <p><strong>Vous aussi vous souhaitez créer votre propre événement que ce soit à quelques personnes pour découvrir un jeu <br> ou carrément organiser un événement, c'est vous le Maître du jeu :</strong></p><br>
        </div>
        <%= link_to "Créer un événement", new_event_path, class: "bg-pink txt-orange text-decoration-none p-2 rounded-2" %>
        <% end %>
        <div class="d-flex m-5 justify-content-center flex-wrap">
            <% @events_true.each do |event| %>
                <div class="card m-3 col-11 col-md-5 col-xl-3" >
                    <img class="card-img-top" src=" <%= event.image_url %> " alt="event image">
                    <div class="card-body d-flex flex-column justify-content-center align-items-center bg-pink">
                        <h5 class="card-title"><%= event.title %></h5>
                        <p class="card-text "><%= event.price %> €</p>
                        <div class="container-fluid d-flex justify-content-center">
                        <a href="<%= event_path(event) %>"><button class="buttonMore mx-2 p-2">Voir plus</button></a>
                        <% if user_signed_in? %>
                            <%= form_for @order do |f| %>
                                <%= f.hidden_field :event_id, value: event.id %>
                                <%= f.hidden_field :cart_id, value: current_user.cart.id %>
                                <button type="submit" class="buttonMore p-2">Ajouter au panier</button>
                            <% end %>
                        <% end %>
                        </div>
                    </div>
                </div>
            <% end %>
        </div>
    </section>
</div>